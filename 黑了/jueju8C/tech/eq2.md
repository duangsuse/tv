# EQ APIå¤§çº²

å…¨å±€æœ‰7é¡¹ `el,qs,it,Eqv, CSS,Vec,anim`ï¼Œè€Œå‡½æ•°æŒ‰1~3ç•Œ(ç•Œé¢ ä¼ è¾“ è¯­è¾…)åˆ†

ç•Œ1
- wOSA `wOp({},chk) wSty({},'#css')/åå¼• wA({},...f)` ï¼Œææ¡†æ¶â€œå¤§æ–°2åŒ–â€ å¤§å†™OSD åˆ·æ–° æ·¡åŒ– ç»˜ç”»
  - O `{run(0,{dom:$N}),drop(), acty:$Y}`
  - {tap:ev=>{e,ei,eRel,e0, T},tap2,tap2s_li} {hov:[ptrIn,Out]|=>it.x ,key,tapup,focus:[,blur] ,drag:over~drop,dragit:s~end} {draghov,insel:f full()?,inview:0~1 ,hovE,focusE,IME:oncomposition}, 'over stop/! once meFirst scroll')
  - inview: [IntersectionObserver](https://docs.w3cub.com/dom/intersectionobserver) `[[0~1],e,padout]` ,Vec2
  - `c={tap:$Y}; c.tap.then`
  - S `{color:fg on bg, pad/o, pos:çš†å¯ç©º["absolute",xy,wh-resizeç›‘å¬,$Yå«æ¡†], anim:{dur},atranDur, Trotate:.5, Fshadow:[x,y,blur],Fhsl_H:NO, GbackdropBg,  _myVar,__mozXX}`. see:elsvg filters
  - pos:ResizeObserver or, see _Die
  - `CSS._.myVar=[0,'<length-%','time',]` !inherits. æ”¯æŒ#+é‡å¤ï¼šCSSUnitValueè§£æ
  - A `{ v,edit,show:æ·¡åŒ–,has/hwrap:el.b|slot[name] ,drag}` faster `getAttrNode` than getV/attr[k]
- qsç›‘å¬ `qs.css${} .css1${}  e.qs[attr,], qs@mediaK: V, qs@net: wifi|none${c=>c.DL='2~4g',dl}` via:qs.on/atRule.net={v,}, dpi:scr/resize ,ori,acc,oriDiff, docDate
  - e.qs\*[|wtf].txt |>child${}\`=rv. `(e,{mut:"A|T|D", mutA},old)=>{}`
  - `qs.let(fn=wOp).let({id:1}).lets(e=>e+'').join()` qså¾—1æˆ–Né¡¹,  `el(tag, ...fe__ee)` åœ¨ `el.get` å¯ç”¨cssæˆ–'*'åŒ¹é…å…ƒç´ /æ­£åˆ™
- elç»„ä»¶ `el.tag=wA(), elåå¼•, el.wtf=({propA=1,chk,st:{},url,on})=>el.div() , wtf.flag='for chk'`
  - `ary([], li, ul('...')); when({}, {user:x=>wA 'css.user',post}, o=>o.type); showIf(x.win, notNO=>Gold()) `
  - `at: wOp.at({e?}, ret={tap:1, defl(){} }), Eqv,anim`
  - `btn(txt=> inMenu,)`; `dialog(res=retV, inert=NO|eæ¨ªä¸­å¿ƒ|bodyå¿…é€‰)(form).wUI` ariaHasPopup, h/opt/colgroup dt, summary/legend/figcaption  abbr,ruby. rateLim(-1),Eqvfold
    - `ask('q',1); chk('q'); say('toast',danger=0~3); pickColor({stopAt:c.ref})`
    - `contacts({name:1, tel:2, address:$Y,icon:Blob,email})`
    - main article, nav aside, attr(); datetime/M/W,range,color. meter,prog
  - `menus(ss'A B', {on:'hov', erase, n:2} )(el.menu, )`
  - `otp(async(code)=>, -4)(wOp({blur(){this.run(1)}, stopAt:rv }) )` <keygen>
- `el._Lazy={Paint,Rn,pintop,_fread,_fxml }, ._Die=[]`
- el.href\`axios mathjax bs@4.6\` å¯npm,importScriptsã€‚å¤šè¡ŒåŒ `wSty(,'').acty`
  - `wSty.css={M_:'mdui-', use:'M_' /*.own btn*/, cdn,cdn_min:$Y, op:{pintop,.}}`

Node.it

```js
e={
  tail, // ([]åŒ)è¯»æ·»æœ«é¡¹/æ–‡æœ¬å¦‚ ins.eRï¼Œä½¿ç”¨ docFrag..å¤šå‚append ä¼˜åŒ–
  pos={L R UP css n:NO|0, look:-1skip onNO(tw,lr)},
  ins={L R e eL eR eHide.css=[pseudo]}, qs, //^ NoteIter/TreeWalk å°è£…
  animate({Trotate:.5}, 600) |('@keyframes')
}

qs.PWA`ä½ å¥½ä¸–ç•Œ by You @EQ ##css,js,h5,fullwin##
View world filled with tags&CSS properties!
` .share(title,txt/file/body, url,args?) ,.badge ,.titleArea

PWA.notify={
  main: { vib:[]|NO, canDup:0~2, image,
    act(){},
    //via:SW only
    act: { good(){}, async haveARest(args,ev){ ev.noClose=$Y; clients.openWindow },
      input(txt){}, or:'good', names:{good:"Nice day",input:"?placeholder"} }
  },
  icons: {
    main:'data:', good:''
  },
  via:{showNotification,notificationclick}?
}
qs.Idle={pageShown, wake, idle:rv, prefer:{dark:rvBody, saveData,noAnim}, dt:60,acty}  //@prefers-reduced-motion
  GPS={now:{lon,lat, xyz,T},  acty:$N,run({maxAge,high,timeout}) }
```

- `ST({imgs:["*"]},SW)` ç¼“å­˜ç½‘é¡µèµ„æºã€‚`eqjs -x xml,css` å°†ä¿ç•™ link é£æ ¼ .css å¹¶åœ¨bodyå°¾æ³¨å†Œé¢„è½½script
- `el.preload(fetch, load, connect__dns)` å¯ä»¥ç”¨å¤šè¡Œ`\` å¡«å…¥éœ€è¦é¢„ç¼“å­˜çš„ç´ æã€‚load=é¡µé¢å¿…é¡»(å¦‚å­—ä½“,èƒŒæ™¯å›¾,æ‡’CSS)ï¼Œdns=ç›¸å…³ç«™ç‚¹ã€‚`link[as,crossorigin]` è‡ªåŠ¨æ®æ–‡ä»¶åç¼€ã€‚æ­¤å¤– `meta({og:{}, })` å¯ä»¥ä¼˜åŒ–å¤–é“¾ä½“éªŒ

ä¸ä½¿ç”¨ `e.replaceChildren` è€Œå¾ˆé€‚åˆå•åˆ—çš„æ»¤/åº,é‡ç®—

wKbd æ”¯æŒ aria-KeyShortcuts Ctrl+A è¯­æ³•ã€‚å³ä¸è¦æ±‚ accessKey=A ç­‰çš„Altä¿®é¥°

## anim

- `anim(v0,v1, rv|x=>)={dur,  }`
- `anim.at(rv,)={dur}` å¯ç”¨æ¸å˜, iseq
- ä¸¤é¡¹é—´æ— è®º `var(--x)`/imgéƒ½èƒ½æ¸å˜ã€‚`ac=anim.at(rs|'x', {ease,erase, extend:'transform'})(e)` å¯¹ `--å±æ€§` è¿›è¡Œè¡¥é—´ï¼Œ

è¿™ä¸¤ç§å‡½æ•°éƒ½èƒ½åœ¨UIæˆ–å›¾ç‰‡ä¸Šä½¿ç”¨ï¼Œ
- `ease(A,B)(t=0~1)` åœ¨ A~B é—´ã€‚`anim.at` åœ¨ `isNaN(ease("","hh")(1.0))` åˆ™å¯¹eå‰¯æœ¬å’Œæ–°e è¿›è¡Œæ·¡åŒ–
- `erase(A,B)(t), erase(g,A,B)(t)` æ˜¯é’ˆå¯¹DOMå’Œåƒç´ å›¾çš„æ·¡åŒ–(/è¿›é€€åœº)ã€‚åˆ™å®ç°eæˆªå›¾åˆ°e1æˆªå›¾ t% çš„æ¸å˜ã€‚CSS é…ç½® `--erase: fade` ï¼Œease ç€é‡ç»˜

ç•Œ2
- `qs={H,HI, ST,PM}`
- `CSSUnitV.it({ rateLim(0~3, f), then, rate(f)(),  0s|period(SW,'tag') })` //sw.onsync
- `V(0,0), Vn(2), Va([n,2]); Vec2.in(doc.html.scroll.area, e.xy)`
- `.pMouse(e,tap?)` xyæ˜¯åŸºäºæœ€è¿‘ `position:relative` çˆ¶çº§ï¼Œå¦‚eã€‚ ä¿®æ­£é¼ æ ‡ev.offsetX(æ‹–æ‹½æŠ“ä½çš„æ¡†å†…ç‚¹)
- `scroll` åç§»å=clientX,x,left (äº,"åŒ…å›´"clientRects) ä¹Ÿæœ‰äººæŒ‰ `screen.area` ã€‚offsetParent é»˜è®¤ body(page)
- `P.z` é¼ æ ‡ 0åˆ™æ¾é’® è§¦æ‘¸ Touch.force

Eqv

`cat` æ˜¯â€œåˆ°å¯è®¡ç®—â€æ–¹å‘å¦‚ parseInt æ˜“å¤±è´¥ï¼Œ`cut` ç›¸åã€‚pipe(a,b) æŒ‰a,b cat åº

```js
Eqv(cat,cut=cat):
  oncat(x, fc_async)
  flip, fcat,fcut

pipe(...keq_f) //æŒ‰catç»„åˆå‡º å«1f? å‡½æ•°:Eqv. kå¦‚'!','num'
way(Y,N)|(v,eq,not)|({v:1, _VK: })
only(p, eq)
pad(+1, 2) //+1,*2
x=noOp

int.v(10,parseInt) .cut=toS
num
json //with Map,Set,BigInt,Err, _at Date
json.v((k,v)=>Eqv, space=NO)
base(k=64) //not win.crypto
p7z('gzip|deflate|brotli').cut(utf|blob) //stream.pipeThrough. see:ndesmic/zip
file(/*input-dropEv.fileBlobs*/to='DataURL|BS|json|',strm=[7z'gz']).cut(s|json|imsvg|data:)
  .dl(el.a |NO) = `<a download>`
  .url.cat(u,e)// objectURL
  .fmt
//cat()._info={path,type:MIME ,size,atime} ; a.srcObject=Blob(['utf8'], ['text/plain']) . see:videojs
//txt,ab: it|Response|worker ReadSync|fread. Blob='bitmaprenderer'
form.cat(?search|&form|e)==kv.ify
replace(t_k,v)
sep(/\s+/|[';','='], fi_eq=Eqv.x, Inf) .cut ,//[...'ğŸš€']
sepIntl('en', wordpara=0~2, {cat:'num|ber', as?:'%|USD|unit', brief:0~3} {'list', as:'|', isWord}) // å¸¦æ­£è´Ÿ,é•¿å,ç¬¦å·,çŸ­ç¬¦
fmt(`M,key:y.*`, {y:int.let({RE:/(\d+)/}) ,M:"mark"})
  camel(cap0=$N,sep='')
  snake('_')
  date('%year y-m-d h:M:s HT') // tick('+|= d',...)
fmt1(`pre_suf`,)

//not DOMP/XMLS
h5(safe=NO|`div p img|!script head ; !hidden; main wrap`), //Sanitizer 2.ç”¨*10,/10nè®¡ç®—ç²¾å¯†å°æ•°  3. Node.nonceä¼ éšç§ä»¥é¿å…é¥æµ‹å›¾ç‰‡
esc={
  url={ //escape()
    full,
    id("xx"),
    short("im", bookmark="origin/%s")
  },
  h5(dot='|xml|svg'),css, RE
  http://www.w3.org/2000/svg
},
iverb, //{row,fwd,i} i=1æ—¶ +2=æ¨ªå³ -2=æ¨ªå·¦ +3=çºµä¸‹ -3=çºµä¸Šï¼ŒÂ±1æ—¶i=0ã€‚-1 å°±èƒ½æ¢æ¨ªç«–æ’ï¼Œè´Ÿå·å°±é•œåƒ  screen.iverb=2

at(rwv_a=c.it.res, a_rv=[.x,.y], fv=noOp|(x,y)=>1 )
at(AB, [A,B], Eqv.of(sep, c.it.sp)) // sp=',' AB='x,y' A=x
listen(c.it.x).onmod=> $Y//åˆ ç›‘å¬
sepObj([/food/, /drink/]|NO, [pipe(`'bad' +`)]|K_Eq)

kv={
  V.cut([]), // onto ._this
  ify(o){get,set,has, valueOf} //Trie: kvPath.cut
},
kvPath('/', (k,v)=>{åŸºäºdeep})


file.open('r',rw={'text/plain Texts': `txt md`,'video/mp4':rec, avimage:3|$Y,json}, {v, record:'face|cam|win|ID'|g, on:'tap' })
//''rwax  requestFileSystem, showO/S/webkitdirectory/DirectoryPicker
  .wUI // label>input[accept,multiple, drop].write{opacity:0}
  () //custom Texts

//å±æ€§æ›´æ–°ï¼Œåˆ™æµé‡é€ 
record:{
  to:'face', //User/Display å³å‡»å½•åˆ¶,æ˜¾äºwUI(video)
  area:V(w,h),
  acty, //start/resume pause
  need:(ctrl={audio:1,video:1, mods:canSet }),
  fps:30, dt:2, //chunksz. see canvasfps:0
  bps:[128000,2500000],
  okOnce(), ondataava..
  //tap!=stop Stream. v=ok() filetype Blob
  //kind,label,devId
}
}
```

h5,file.open æ”¯æŒNodeï¼Œä¾èµ–jsdom-`eqjs` èƒ½ä»¥JSDOM/Selenium çš„æ–¹å¼ç¼“å­˜ç”Ÿæˆ

JSON åŒ–åŸºäº valueOf/Date.ofValue ã€‚ä¸æ”¯æŒ `DOMPoint(XRVR).toJSON-fromXX` å¼æ¥å£

- el.draw(/2D[ar]|GL2?/|rvBitmap,eCan) .flush , crop(xy,wh|im).rgba  | (xywh|{},im)createImageBitmap | (e)svg | (rvVa,e) `svg` points/el.draw.dt
- `el.Paint(f named(g,L,{_cssV}){}) (e)` for async 2D, `ary(layersOptimize,canvas)`. `draw` supports HiDP
- `g.penMode` erase=dest-out, bg=dest-over, clip=dest-in,  , see:*-blend

```js
qs.PM({postMessage,onmessage}|'bcast'|onconnect/runtime, {
  f(){}, // queue async. wait echo
  x:1, //set, transfer
  origin:'*' //as content/Win.opener
})

close=PM('/events'|new WebSocket(url), {
  or(dat,ev),
  cmd1(x1){via send(';cmd1[x1]')},
  sse(dat){ dat==json }
  acty, useBlob:$Y //ok,error|close
})

await PM(()=>{  } |[class], {at:Worker|{addModule}, _atK:`Processor Paint`, scope:'/'}) .port

class SW{activate(){},fetch, async install, push({data}),sync({lastChance}),periodsync  }

//pushManager.subscribe({userVis,psk}).endpoint

PM(doc, {
  b: 'bold'
}).b={v:$Y,onmod}

PM(MediaSession, {
  now:{
    playing:$Y,
    t: 30.9, dur: 60, speed:1, //timeupd
    order
  },
  play:[play,pause,seekto ,stop/fwd/back]|e,
  next:[prev/nexttrack,skipad]|a,
  info:{title artist album  artwork:[] src}
  // video::cue/change of TextTrack
})

PM.cfg={ credentials,withCredentials }

Eqv.detect={
  async Text.cat()={ //OCR <map>
    [xy,whr],v,
    boundingBox
  },
  Face(n), QR(fmts=>vr),
  Speech .cat(jsgfCmd, {acty, audio,sound, got, result})
  .cut(rs, {acty, voices:ra, use:{rate,volume,lang, pitch,voice, sep:bound }, next:end/err})
}

Eqv.diff(a,b) => [splice(0,1,'replace[0]'), [2,2,'del[2~3]'], ]
```

see:[Worker-arg](https://developer.mozilla.org/en-US/docs/Glossary/Transferable_objects#supported_objects) [richtxt/st](https://docs.w3cub.com/dom/document/execcommand)

- åˆ—å…¥è·¯ç¨‹ï¼š Bluetooth, crypto AES/SHA, TextTrack+vibrate MSE, GL, FFT, Detector polyfill, Gamepads.axes[yxyx], Collide2D
- éœ€æŠ•ç¥¨ï¼š Audio MIDI, RWStream, BgFetch, Crypto, CBOR, WebAuthn, SW `index.add`, navigation, CustomElements/Shadow
- ç‹¬ç«‹æŠ•ç¥¨ï¼š Sensors å…‰ç”µ, ImageTrack(OpenCV), SVG/URLFont, Pinchrotate/swipe, UPnP/2UAæŠ•å½±/Quality, NFC NDEF, Serial/HID/USB, RTC, IDB,Idle/Sched
- ç¦ç”¨ï¼š å†—é•¿æ·˜æ±°çš„XSLæ¨¡æ¿å’ŒXHR,+ä¸å¯å–è·¯å¾„çš„XPath; `THREE aframe` çš„AR/VR XRSystem; Pay, MediaKeys/Cap,CSP; SharedWorker/Locks; 10xé™é€ŸURLPattern

ç•Œ3
- `const $Y,$N,NO,undef,  noOp,just,say`
  - `just.v(f,arg); say={f:logs, dbg:'d dx'(dir,console)+dif+dm }`
  - `console.logN(n|NO, app.it.lines, {key(ev),xywh, line,ps1:'>'})`, el.href\`` å¤šè¡Œæ—¶åŒwSty(,'css')
- `win=global, doc,  isA,newA,n,rn, ss,heredoc.v(JSON)`
  - `doc.URL+={origin, pathname,search,hash,  target:$N, onback/go:0}`
  - `URL=[s,'title', {}, Eqv.form]` UA=`{env:ss'Chromium 105.0.5195.102 ...', os:Â ss'Linux x86_64 5.19.6', vnd:[$Y, "iPhon"]}`
  - `newA(n|v0|ag?, async push|i|old=>)`

  - `isA(T,v)` ç¼©å†™ obj fn str num bool sym è‡ª object function string number boolean symbol è¡¥å…… isNaN, == undef/Infinity
  - `rn(1,100).cut/cycle,.has,.rand()` rInc

it

```js
it={
  fn,
  time(fRun?), // perf/Date secs
  deep={
    n:Infinity, walk(pre,onKV=å¯¹Vé€’å½’, endFast=noOp,end=å·²å¤åˆ¶)(v),walk2(kvBoth, k2V,,)(a,b)
    eq(a,b),  // a.make(,'io') diff
    dup(v), // structuredClone
    cfg(v,vDefl, keepV=$Y), // a.make
    is(Object,v),
    unify(a,b)
  },
  this_(f,...a), // doc.lets(_=>{ head+body }) //vars(), !eval
  evaly(f),
  unit(fBquote), // unit(CSS=>1`s`)
  FGrp(eachGrp={list:[], _cnt:n }, f_ik=key=x=>x) // async Vec2 avg/window
  Trie,
  Q(iter), // [].dup .Q
  _agen({*f() }) // yield/reté»˜è®¤å¸¦await fç”±awaiter(p.then,wakeAtYield)ç¡è‡³æœ‰å€¼yield
}

c={x:1, a:[2], f(){}}
c.it={
  x: {v:1,onmod:v=>{} }
  a: {v:[2], it:{onadd,ondel,sort,[0] ,.} },
  keys: ss`x a`
}
say.it(1)(2)==say(1,2)
c.it.f()//bind

c.it()==[1,[2]]; c.it([0])
c.it([0], async()=>666 )
c.it({x:x=>x+1, a:just([3]) })
```

```js
it.fn={
  ref(fUseF), //.v=F æˆ–å– .Y ,.tailrec åå¯è°ƒç”¨ã€‚å‡½æ•°å¼•ç”¨
  cache(f,c__f), //åŒå‚æ•°åªç®—1æ¬¡
  wrap(F,fva_v), //logs() è®°å½•å‚æ•°/ç»“æœ çš„æ–¹æ³•
  flip(F), //é€†åºä¼ å‚
  args(f),  //args((x,y)=>) == ss`x y`  ){ æˆ– )=>ï¼Œé»˜è®¤å€¼ä¸å¯å«ç®­å¤´/name=
  vars(f) //vars((a,b)=>{a+b.x+doc}) == [`a b`, `doc`]
}
```

Q.it

- çœ‹æ»¤åº
  - look(p=$Y), all,any,ones
  - first/last(p=x=>x==$Y) .i,.v ; firsts(p), firstsOut
  - letsFlat, letsLook, sortBy(k__f)
  - shuffle().iter() (n?)
  - `look2((x,i)=>i%2==0)`, .Set
- å¸¦
  - chunk(N, zfill=undef, di=N, f=noOp) / (a=>[1, n(a)/2 >>0])
  - zipNext=chunk(2,NO,1)
  - `b=['x','a'].zip([1,2], noOp)=[['x',1],.]` Array.zip
  - `b.unzip(kv=>kv)=[['x',.], [1,.]]`
  - `['x'].foldZip([1], (o,k,v)=> {o[k]=v}, {}).v`
- å 
  - `[1,2].fold((a,b)=>a*10+b).v`
  - `b.fold((o,[k,v])=> {o[k]=v}, ret={}).v`
  - `(fo=b.fold((o,[k,v])=>({...o,[k]:v}), {}) ).vLast ,.eachStep`
  - `it.FGrp(fo) (b)`
  - `FGrp([noOp,Math.min,Math.sum], x=>x<2) .got(å¼‚æ­¥)`
  - Math.avg, .sum

Set.it
- `ands(iter), subs`
- `dup.concat`

`ArrayBuffer.fmt.let({i1:IO, s:'utf8' }) (v)={size,splice,a, apply(ab=new)}`
- i/u 1 2 4 8, f 4 8
- 'i1 i1'
- ['i4', {tag:'i1', data:'i1' }] .splice
- [{0xa:'i4', 0xf:'i8' }, 'i1'] .type
- dynamic resize n(a). see:file

## ææ¡†æ¶

Only1(e=>rv, sel=[1|Infinity] {nä¸ºè´Ÿåˆ™ç¦æ»‘ç§»,ctrl:$Yåˆ™æ‹–é€‰}, vs=[$Y,$N], sameset=parentNode)

- ä½¿ç”¨ [ariaSelected](https://www.aditus.io/aria/aria-current/) ariaMS æ ‡æ³¨ `[n=1é¡¹æˆ–å¤šé¡¹]`ã€‚aryå¯¹å¯å¤šé€‰åˆ—æ”¯æŒRn/æ‹–æ‹½
- `[aria-controls=eID]` å­˜åœ¨åˆ™ä»¤å…¶ariaAD=selã€‚ä¸ä»¥ hov:[up,down] è€Œç›´è°ƒ=ariaChecked

```js
el.Rn={
  set_now={e0,i0, e,i, sel(|[e0,i0],[e,i]) | (e,[i0,i]|selAll), find(s,'Ijb') }|getRange0,
  focus={ // smooth scroll
    now, inFull, inPic, inSlide, mouse, wake:$N, rotate:'any', unload:$N , root, err(ev){}
  },
  copyNode(mode="|cut|surr|ins",tag?).qs`fromFragImport`  ,
  copy(s?),
  rm(),mvI("move|extend",iverb)|(0|1|[e,i]),isI, //char,word, ^v line,paragraph 
  //isIæ—¶ä¹Ÿå¯CtrlCV

  mark(k),
  sysClip(rv, dt=1),
  area={xywh/s, has([e,i]) },
  xy(vec)={ei,e,es} //caretPosition/Range FromPoint
}

Rn={
  set_now={e|[e0,i0,i?],[e,i] } getRange0,
  mvI("move|extend",iDeg),isI,text, //char,word, ^v line,paragraph, Â±3=full 
  copy(s?),sysClipTo(rv, dt=1),

  copyNode(mode="|cut|surr|ins",tag?).qs`fromFragImport`  ,
  setHL(k),
  area={xywh/s, has},
  xy(v)={ei, es} //caretPosition,FromPoint
}
```

> mark: `CSS.highlights.set(k, new HL(...rn))` å¯ç”¨ `::highlight(k){bg: cyan}`

Event(DataTransfer).it
- `datas.plain/*||text*/="", .URL=[e|im|s],json; data={json}/NO`
- `inputV.openD(sub,'rwax')` xåˆ é™¤ r=aä¸æ–°å»º
- `ctrlX=dropEffect` NO,N,Y
- `img=canvasCentered`. æ”¯æŒdragok=æ”¯æŒcutpaste. ary()æœ‰é»˜è®¤. enterKeyHint,cursoråŒç±»



- `Reload(lo,err,banner=NO)(div(wOp({async reload(p){ p(0,1.0) } })) )` ä¸ºæ•´ä½“(æˆ–å•async/media+img)æ·»åŠ  Chrome å¼åŠ è½½åœˆ/é¡¶æ¡ æˆ–ä¸‹æ‹‰banner. ariaBusy
- åŸºäº `loadstart/end//eddata, abort` ç›‘å¬ã€‚`reload()` ä¼šè¦†ç›– `win.fetch` ä»¥è¿›åº¦/åœæ­¢
- `rnInc(k,max,unit='%'|MB|GB)` å¯ä½œä¸º progressäº‹ä»¶ä¼ é€’ï¼Œ`async="details"` æ˜¾ç¤ºå„å•ä½è¿›åº¦æ¡
- `el.sel` å¯¹ `option.dim` åŠ è½½å®Œæ—¶åˆ‡æ¢ï¼Œæä¾›å¤šé€‰ç¼“å­˜/ä½“ç§¯/åˆ é™¤ ã€‚è¿›åº¦åœ¨å…¶ `label[loadk/n,n]` æš´éœ²
- only1 onlyN!

Reload(lo=p?=> åŠ  è½½å…¥é¡¹.dim>.reload ï¼Œæ®p.vçš„æœ‰æ— é»˜è®¤è½¬åœˆæˆ–è¿›åº¦é¡¶æ¡

el.sel(rv,vs=[v]|{k:v}|grp, {of:'only1/N', picker:$Y, loadk(vSel),fl})
text search url tel email password

el.sel(rv, {of:[n]|{k:jsonV|e},len:rn, chk:1ä½¿ç”¨chkbox/radio/num, dropmenu:$Yæ›¿æ¢selectemail/date,rn,color }) .popup {stopAt:fn.ref}

sel(x.grp, {sex:ss`boy girl`}) åœ¨fl:!details æ—¶å¾—å­—å…¸ï¼Œå¦å¾—å•é¡¹

`label[loadk/n, n] select` ä¼šæ€»ç»“ loadstart/end å­é¡¹çš„è¿›åº¦ï¼Œå»¶æ—¶èµ‹rvï¼Œæä¾› `option.dim{ç®¡ç†â€¦}` ï¼ŒæŒ‰endçš„rnIncå’Œtap2s æ˜¾ç¤ºç¼“å­˜ä½“ç§¯/åˆ é™¤/å¤šé€‰
è‹¥vs=eï¼Œof:cssï¼ŒrvæŒ‰tapé€‰å…¥é˜Ÿã€ä¸æˆªåœloadäº‹ä»¶ã€‚

anim.at.rest={
  iverb:-2,
  flys(f,i)=>f(abs(i)-1),
  A:{sort(a)=>shuf, dur(an,a)=>[an.dur/na], dt:.1} // å—æ’å…¥æ®µ
}


## ç“·å—ç›¸è¿

1. `v.step` åä»¥ `grid wh` é™¤åˆ°æ ¼åº§æ ‡ï¼Œå¯¹BBoxè¿‡æ»¤å‡ºé»‘è‰²æ ¼ï¼Œ`v.collide(vB)`ã€‚`insect:$Y,r:5px` å†³å®š `d<r æˆ– d==r`
2. è‹¥æ–°æ—§ `cols` éƒ½ä»…1æ ¼ä¸”æœªå˜ï¼Œä¸æ›´æ–° `grid:[n*mä¸ªWeakSet w=é¡¹å®½ä¸­ä½æ•°3å€]`ï¼Œè¿™æ ¼æ˜¯ROIåˆ™grid=å®ƒï¼Œç±»å‹æ˜¯Ghoståˆ™åŒç±»å—è·³è¿‡
3. ç¢°æ’ROI(x,y) åˆ™ç®—å‡ºi,j è¿‡æ»¤é»‘è‰²æ ¼åˆ° `ROIs`ï¼Œ`onout` ä»¤grid=å…¨å±€
4. è‹¥åŒºæœ‰4é¡¹ï¼ŒBFSé™„è¿‘é»‘æ ¼ï¼Œå¯¹å¤–çŸ©åŠ 3å€ç»†grid=ROI ï¼Œå—å‡2é¡¹å®šæœŸæ’¤é”€ `qs.Collide2D(va, {, kNN(xy,n__fiv_q) })`

App={
  share(title,body=txt|file, url|notify,args?) ,.badge ,.titleArea
  InView={now, wake, darkMode:`body.1dark2dim`, acty:0åå°æ’­æ”¾ 1åˆ‡é¡µæš‚åœ 1000å»¶æ—¶ }
  GPS={now:{lon,lat, xyz,xyR,T},  acty:$N,run({durMax,HQ,timeout}) }
}
on={, saveData,noAnim  }


## 2Dç¢°æ’

åˆ©ç”¨ `V().it/*.x y*/.onmod` ç»™ç§»åŠ¨çš„ç‰©ä½“åŠ äº›é€»è¾‘ä¸éš¾ã€‚è‹¥è¦çœŸå¤„ç†ä¸¤çƒé—´ã€çƒå£é—´çš„ç¢°æ’ï¼Œå¯æŠŠ1é¡¹å’Œåœºæ™¯é‡Œæ‰€æœ‰å…¶ä»–é¡¹æ¯”è·ç¦»ï¼Œæ¯å¸§å¦‚æ­¤ï¼Œä¸ç„¶ç©¿æ¨¡ã€‚

å·¦å³ä¸¤å—åŒºå†…æ£€æµ‹å‘¢ï¼Ÿè‹¥æŠŠåœºæ™¯åˆ’ä¸ºç½‘æ ¼ï¼Œç»™æ ¼åº§æ ‡æ¶‚é»‘æ¶‚ç™½ï¼Œå³ä¾¿ç‰©ä½“æ»¡å±ä¹ŸOK

1. `v.step` åå…ˆåˆ’åŒºï¼Œæ£€æµ‹åŒºå†… `v.collide(vB)`ã€‚ åŒºå®½=é¡¹å®½ä¸­ä½æ•°3å€ï¼Œ`[n*mä¸ªWeakSet]`
2. è‹¥åŒºæœ‰4é¡¹ï¼ŒBFSé™„è¿‘æ¿€æ´»åŒºåŸŸï¼Œå¯¹å¤–çŸ©å½¢æ·»åŠ 3å€ç»† ROI(x,y) ã€‚æ‰€æœ‰ç‚¹ç§»è‡³ROIåº§æ ‡ï¼Œå—å‡2é¡¹çš„ROIå®šæœŸæ’¤é”€
3. `v` çš„åº§æ ‡i,jè¶Šç•Œn,m åˆ™å›å…¨å±€ç½‘æ ¼ã€‚ stepç¢°è¿‡åå°†æ–°æ—§ç‚¹é›†çš„å·®æ”¾åˆ°ç½‘æ ¼ã€‚  V3=åœ† V4=çŸ©å½¢ `qs.Collide2D(va, {r:10px, insect:$N, kNN(xy,n__fiv_q) })`

ç‚¹é›†çš„æ¶‚é»‘åŸºäºåœ†å¤–çŸ©å½¢ æ¯æ ¼å·¦ä¸Š(x,y) æ»¤å‡ºè·ç¦»å‡½æ•°=(insectåˆ™<)rè€…ã€‚ ç±»å‹ä¸º"Ghost"çš„Vec ä¸ä¸åŒç±»æ ¼ç¢°æ’

æ’åˆ°ROIçš„é¡¹å¯¹ROIå†…çŸ©æ¶‚é»‘ï¼Œåªè§¦ROIçš„é¡¹ç§»è‡³å…¶åº§æ ‡

ä»¥ä¸Šï¼Œæ¯ç‚¹æœ‰ `grid,rediv(), cols,ROIs`


è€æ¸¸æˆç»å¸¸è¢«è¯Ÿç—…â€œç©¿æ¨¡â€ï¼Œæ˜¯å› ä¸ºç¨‹åºå‘˜æ•°å­¦å·®å—ï¼Ÿå› ä¸ºCPUç®—åŠ›æœ‰é™ã€‚ å…¶å®ï¼Œ[ç¢°æ’æ£€æµ‹](learnopengl-cn.github.io)æ˜¯ä»»ä½•é”®é¼ å›¾å½¢é‡Œï¼Œæƒ…å†µç¹å¤šçš„å¿…å¤‡ç®—æ³•ï¼Œæœ‰ç½‘æ ¼ç›¸é‚»ã€k-Dæ ‘ã€å…«å‰æ ‘ç­‰ç‚¹èšç±»æ€è·¯ã€‚

å®ƒåœ¨æ¯å¸§ç»˜åˆ¶(â€œç©¿æ¨¡â€)å‰ï¼Œéƒ½ç¡®ä¿ç©å®¶æ­»äº¡ç­‰è„šæœ¬å—è°ƒç”¨ã€‚è¿™é‡Œåªè®¨è®º `V(x,y)` ä¸‹åœ†ç‚¹/çŸ©å½¢çš„ç¢°æ’ï¼Œæœ‰ä¸ªå¿…è¦æ­¥éª¤ï¼šè·å–æœ€è¿‘é‚»ã€‚è¦ä¸€ç‚¹å’Œæ‰€æœ‰å…¶å®ƒè¯•éï¼Œæ‰¾æœ€è¿‘ï¼Œå¾ˆæ…¢ï¼

å››å‰æ ‘quadtree æ€è·¯åƒäºŒåˆ†æŸ¥æ‰¾(EQ `a.sort=;a.first(5)`)ï¼ŒæŒ‰åŒºåˆ’åˆ†ç‚¹ç›´åˆ°åªå­˜1ç‚¹ï¼Œç„¶åä»3ä¸ªé‚»å—/çˆ¶çº§ æ‰¾èšé›†å¤šçš„å…ˆæ¯”è·ç¦»ã€‚EQ æœ‰ `Vec.it.onmod` åŠ æˆï¼Œæ— éœ€æ¯å¸§é‡é€ æ­¤ç»“æ„ã€‚`[abcd,up,v4].rediv(v)` é‡åˆ’åˆ†å³å¯ä¿è¯ç»“æœå‡†ç¡®

åŒºå—æ˜¯åœ¨åŒºå†…é€‰1ç‚¹ï¼Œå»ºç«‹çš„4ä¸ªè±¡é™ï¼ŒEQä¼šé’ˆå¯¹y,xè½´æ‰¾ `qs.Collide2D([V(x,y), ondel], {split:ä¸­ä½æ•°, leaf:3/*é¡¹åŒåŒº*/ })`

åœ¨ `v.nearN(1)` é‚»ç‚¹å†åˆ¤åï¼Œä¸¤ä½“ç¢°æ’åªæ‰§è¡Œ1æ¬¡ `v.collide({vB})` ï¼Œæ‰€ä»¥æ¯”å¦‚æœ‰äºº/æ€ªç‰©ï¼ŒæŠŠæ‰€æœ‰åˆ¤å®šé€»è¾‘å†™åœ¨â€œäººâ€ä¸Šã€‚å¦åˆ™ä½ å°±å¾—è‡ªå·±å®šå¥½ `vB.f(v)=v.f(vB)`

å½“ç„¶ï¼Œæ‰¾å­é›†ç¢°æ’çš„ä¹Ÿæ˜¯ `rediv(ç¦ç”¨åŸå—)` ã€‚å¦å¤–åˆ’åˆ†å¿…é¡»æ˜¯ä¸­ä½æ•°ï¼Œä¸ç„¶æ— æ³•ä¿è¯åŒæ ¼å†…=è·ç¦»æœ€è¿‘

>JSä¹Ÿæœ‰p5,[Physjs](http://wellcaffeinated.net/PhysicsJS/) å’Œ[Matter](https://brm.io/matter-js) å…³é”®è¯:broadphase


EQåˆ†ä¸‰ç•Œï¼šç•Œé¢ã€ä¼ è¾“ã€è¯­å·§ï¼Œ'Eqvå¯åŒ' 'QueryæŸ¥è¯¢' äºŒå­—åˆ™æ¯ç•Œéƒ½æœ‰ä¸€éƒ¨åˆ†

1. ä¹å®«æ ¼;OSDARR.  Only1,Slide, D data blobæµ®æ ‡é“¾è¡¨, anim EAE, Reload(), Rn
2. HISTPM. H http, HI pjax, ST storage, PM postMessage/App
3. itFPVec. fn deep Trie unit(CSS,_=>{}), FGrp eachStep, CSS draw Paint(svgFilt), Vec2~N

ä¹å®«æ ¼:
- HTML ç”± `<æ ‡ç­¾å>`+...ä¸‰è¦ç´  åŠå…¶(æ–‡æœ¬)children ç»„æˆçš„UIæ ‘ï¼Œå¦‚ `p span.time, p b` é€‰ä¸­æ–‡æ®µé‡Œâ€œæ—¶é—´,æˆ–ç²—ä½“â€ç‰‡æ®µ
- ```js
  el.let(_=>{ //EQ ä¸è§„å®šâ€œmountâ€ã€‚è¿™äº›â€œJSXâ€å¯è¢«ç¼–è¯‘ç¼“å­˜
    doc.body.tail=[p(span(wSty`time`, "8:00"), b("Bold")),
      el`p span.time+b`
    ]//^ æ”¯æŒemmet.io
    el.Timed=({t="", s=""})=>p(span[`.time`](t), b(s))
    el.get((s)=>(el.Timed(out={s})(doc.body) ,s)) //Bold
    out.t//8:00. `p`å¯ä»¥æ—¢å­˜! SSR,çˆ¬è™«,ç”¨æˆ·è„šæœ¬ ä¾¿åˆ©
  })
  ```
- wOSA `wOp(c={tapå•å‡»,tap2så³é”®},'stop! only') c.actyå¯ç”¨; wSty({font},'#css'); wA({label,edit,show},'aria-')`
- è¯´é€‰é—® `say(); sel(); ask()`
- see/s If `see([1,2], x=>li("Food",x)); seeIf(user.vip, v=>'ç­‰çº§'+v.level, 'å¯å¼€é€š'); sees({type:user,..}, {user:x=>"æ˜¯ç”¨æˆ·", else:i("è¯·æ›´æ–°å®¢æˆ·ç«¯")})`

è§‚å¿µè¦æ”¹ã€‚æ‰“å°å˜é‡è¯· `alert(("a"+1).let(say) )` æˆ–ä»¥ `says(alert)("a"+1)` ç›´æ¥æˆªè·çœ‹å‡½æ•°/å¯¹è±¡çš„å‚æ•°ä¸è¿”å›ã€‚ `d=$0, db={table:1}` åˆ™è¯¦ç»†æ˜¾ç¤º `d('dir',console); dif=isBreak_; dm('',/char/)`ï¼Œé  `say.dbg` å¯ç”¨

`f={}.it(keys?)` åˆ™ `rows=f(); f(rows)` ä»¤å¯¹è±¡ä¸ºsqlè¡Œã€‚ä¹Ÿæœ‰ `.it(key_swap, k__f)`

EAE é€šè¿‡ `anim._atMod(rv,f?)` æä¾› `o[k]` çš„æ¸å˜ï¼Œéœ€è¦ `div(anim.at(rv,), wSty({ease:'ball, k1 linear',erase:'arc', pos:[,rv]}))`ã€‚

è‹¥é…ç½®äº† `--an-exit: fade a1` åˆ™remove()æ—¶æ·¡é€€ï¼Œappendæ—¶eraseå¹¶åŠ¨ç”»ï¼›ä¸”çš†å¯¹childListå³ä¾§,block/grid æ—¶é€ä¸ªæ¥æ›¿ï¼Œå¦åˆ™ translateX/Y åŒè·ç¦»

Va é€šè¿‡èƒ½ movR,ins çš„æµ®æ ‡é“¾è¡¨ï¼Œåˆ›å»ºæˆ–ç»‘å®šF64Arrayç­‰ArrayBuffer ï¼Œä»¥ -16 è¡¨ç¤ºVec2


