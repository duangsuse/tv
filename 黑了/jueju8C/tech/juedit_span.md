
在你学习 Eclipse 和 Notepad++/2 的时代，编辑功能基本上只有按模板新建和代码高亮，绝谛当然也支持按主题高亮已知语言文本、配对括号和同名变量，这些不靠扫描光标附近符号实现，其实，绝谛会以与juec编译器或IDEA相同的方式表示正被编辑的代码：语法树 另+区间表。

- VSCode 的编辑框引擎 Monaco 会把代码分词，渲染成网页片，当增删时增量分词，只更新排版后有变的片。
- 当你在 DevTools 的编辑框 CodeMirror 里打开大文件，它会禁用部分高亮，因为CM编辑框每次移动光标都重生成整个网页树，你对单词增删时，它才只变更一行内容

绝谛接受律C格式的语法定义，并利用容错解析、按{} 增量解析同时完成分词和语法树的创建。 首次完整解析后，律C返回含 `集<序号A~B: 词条类型> "span"` ，对每个区间 取字体外边框-填色长方形，即生成高亮的字体贴图。 鼠标下符号的功能，也是基于文字光标从span表获取

尽管绝谛靠单 textarea 就实现了VSCode用成千上万片元素拼出来的交互(甚至滚动!)，span表和AST也总在修改。当你在{} 内增删，律C会只重解析最近一层{}内的语法并即地替换其AST。

把文件头尾说成左和右，如果在最右加字符，左部span都不用改，但在最左加3字，其右侧都要移3位。为了这类复用，绝谛引入了左闭右开“射线”叠成的 偏移表

`{abc}{def}` 现有两个成员AB， A删1字 其'}'右偏移+1 ，跳过因缩短被'}' 遮盖的c字

`{abc}wtf{def}` A增1字，其'}'右偏移-1 ，'w'被覆盖前 保留"wtf"，若光标偏移后<'}' 则使用保留的区表

若A增4字，完全覆盖"wtf{" 会怎样？回看首例 `{abc}{def}`，A=i5+0 B=i10+0；`{ab}{def}` A=i4+1 B=i9+0 ，B的位置是依左浮标的i而定

`{abc}w{def}` i5+0, i11+0 增2字，变 `{abchh}w{def}` i7-0, i13+0 ，此时 (A的末尾=i5)~最右 内区间都已偏移+2 ，避免了B的增量解析覆盖右侧{}，并给A新的缓冲区"w"

于是我们就收获了无论何时悬停，都能高亮光标AST项，且无需碰撞检测的动态高亮文本框。
